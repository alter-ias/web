<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALTERLABPLAY</title>

    <!-- Fuentes de Google -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Iconos de Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <style>
        :root {
            --background-color: #0F121B;
            --text-color: #FFFFFF;
            --secondary-text-color: #d1d1d1;
            --accent-color: #FFFFFF;
            --highlight-color: #1DB954; 
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { color: var(--text-color); font-family: 'Montserrat', sans-serif; background-color: var(--background-color); overflow-x: hidden; }
        #background-video { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; object-fit: cover; filter: brightness(0.6); }
        .container { width: 90%; max-width: 1200px; margin: 0 auto; position: relative; z-index: 2; }
        .main-header { display: flex; justify-content: center; align-items: center; padding: 30px 0; text-align: center; }
        .logo a { display: flex; align-items: center; gap: 10px; text-decoration: none; flex-direction: column; }
        .logo img { height: 40px; width: auto; }
        .logo .logo-text { font-size: 1.5rem; font-weight: 700; letter-spacing: 2px; color: var(--text-color); text-shadow: 0px 2px 5px rgba(0, 0, 0, 0.7); }
        .page-footer { position: relative; z-index: 2; padding: 40px 0 30px; text-align: center; margin-top: auto; }
        .social-links a { color: var(--secondary-text-color); font-size: 1.8rem; margin: 0 15px; transition: color 0.3s ease; text-shadow: 0px 2px 4px rgba(0, 0, 0, 0.5); }
        .social-links a:hover { color: var(--text-color); }
        main { display: flex; flex-direction: column; min-height: calc(100vh - 170px); justify-content: center; }
        .player-section { display: flex; align-items: center; justify-content: center; padding: 40px 0; }
        .player-wrapper { background-color: transparent; backdrop-filter: none; padding: 40px; border: 2px solid rgba(255, 255, 255, 0.2); border-radius: 15px; max-width: 420px; width: 100%; margin: 0 auto; text-align: center; box-shadow: none; }
        .album-art-container { width: 100%; max-width: 300px; margin: 0 auto 30px auto; }
        #album-art { width: 100%; height: auto; aspect-ratio: 1 / 1; object-fit: cover; border-radius: 10px; box-shadow: 0 5px 25px rgba(0,0,0,0.5); transition: transform 0.4s ease-in-out, box-shadow 0.4s ease-in-out; }
        .player-wrapper.playing #album-art { transform: scale(1.05); box-shadow: 0 8px 40px rgba(0,0,0,0.6); }
        .track-info h2 { font-size: 1.8rem; font-weight: 700; line-height: 1.2; margin-bottom: 8px; color: var(--text-color); text-shadow: 0px 2px 5px rgba(0, 0, 0, 0.7); }
        .track-info p { font-size: 1rem; color: var(--secondary-text-color); margin-bottom: 30px; text-shadow: 0px 2px 5px rgba(0, 0, 0, 0.7); }
        .progress-container { background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 5px; height: 8px; width: 100%; cursor: pointer; margin-bottom: 8px; }
        #progress-bar { background: var(--accent-color); height: 100%; width: 0%; border-radius: 5px; transition: width 0.1s linear, background-color 0.3s ease; }
        .progress-container:hover #progress-bar { background: var(--highlight-color); }
        .time-stamps { display: flex; justify-content: space-between; font-size: 0.8rem; color: var(--secondary-text-color); font-weight: 500; text-shadow: 0px 1px 3px rgba(0, 0, 0, 0.8); }
        .controls { display: flex; justify-content: center; align-items: center; gap: 25px; margin-top: 30px; }
        .controls button { background: none; border: none; color: var(--secondary-text-color); font-size: 2rem; cursor: pointer; transition: all 0.2s ease; text-shadow: 0px 2px 5px rgba(0, 0, 0, 0.5); }
        .controls button:hover { color: var(--text-color); transform: scale(1.1); }
        #play-pause-btn { font-size: 4rem; color: var(--text-color); }
        #play-pause-btn:hover { color: var(--highlight-color); }
        @media (max-width: 480px) { .player-wrapper { padding: 30px 20px; } .track-info h2 { font-size: 1.5rem; } }
    </style>
</head>
<body>
    <!-- CAMBIO: Ruta del video corregida a la ruta local que especificaste -->
    <video autoplay muted loop playsinline id="background-video">
        <source src="assets/videos/web05.mp4" type="video/webm">
        <!-- Puedes añadir una versión .mp4 como alternativa -->
        <!-- <source src="assets/videos/web05.mp4" type="video/mp4"> -->
        Tu navegador no soporta la etiqueta de video.
    </video>

    <header class="main-header container">
        <div class="logo-container">
            <div class="logo">
                <a href="#">
                    <img src="assets/img/logo03.png" alt="Alter.Lab Logo">
                    <span class="logo-text">ALTERLABPLAY</span>
                </a>
            </div>
        </div>
    </header>

    <main>
        <section class="player-section container">
            <div class="player-wrapper" id="player-wrapper">
                <div class="album-art-container">
                    <img src="assets/img/labplay/alovesupreme.jpg" alt="Carátula del Álbum" id="album-art">
                </div>
        
                <div class="track-info">
                    <h2 id="song-title">Cargando...</h2>
                    <p id="song-artist">Artista Desconocido</p>
                </div>
        
                <div class="progress-container" id="progress-container">
                    <div id="progress-bar"></div>
                </div>
                <div class="time-stamps">
                    <span id="current-time">0:00</span>
                    <span id="total-duration">0:00</span>
                </div>
        
                <div class="controls">
                    <button id="prev-btn" title="Anterior"><i class="bi bi-skip-backward-fill"></i></button>
                    <button id="play-pause-btn" title="Reproducir"><i class="bi bi-play-circle-fill"></i></button>
                    <button id="next-btn" title="Siguiente"><i class="bi bi-skip-forward-fill"></i></button>
                </div>
            </div>
        </section>
    </main>
    
    <footer class="page-footer">
        <div class="social-links">
            <a href="https://www.youtube.com/@AlterLabGen" target="_blank"><i class="bi bi-youtube"></i></a>
            <a href="https://www.facebook.com/alter.labgen/" target="_blank"><i class="bi bi-facebook"></i></a>
            <a href="https://www.instagram.com/alter.labgen/" target="_blank"><i class="bi bi-instagram"></i></a>
        </div>
    </footer>

    <audio id="audio-source"></audio>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const playerWrapper = document.getElementById('player-wrapper');
        const audio = document.getElementById('audio-source');
        const playPauseBtn = document.getElementById('play-pause-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const songTitle = document.getElementById('song-title');
        const songArtist = document.getElementById('song-artist');
        const albumArt = document.getElementById('album-art');
        const progressContainer = document.getElementById('progress-container');
        const progressBar = document.getElementById('progress-bar');
        const currentTimeEl = document.getElementById('current-time');
        const totalDurationEl = document.getElementById('total-duration');
        
        const playlist = [
            {
                title: "A Love Supreme",
                artist: "John Coltrane",
                // NOTA: Tu link de Google Drive no es un enlace directo y no funcionará en <audio>.
                // He mantenido este enlace funcional como placeholder. 
                // Para usar tu propio archivo, súbelo a tu servidor y pon aquí la ruta local, ej: 'assets/audio/alovesupreme.mp3'
                src: 'https://firebasestorage.googleapis.com/v0/b/alterlab-84269.appspot.com/o/audios%2Falterlab_music.mp3?alt=media&token=d557343e-c6c7-4348-ac19-b68427776189',
                cover: 'assets/img/labplay/alovesupreme.jpg'
            },
            {
                title: "Lofi Study",
                artist: "FASSounds",
                src: 'https://cdn.pixabay.com/audio/2022/05/23/audio_78678619a9.mp3',
                cover: 'assets/img/labplay/lofi-study.jpg'
            },
            {
                title: "The Beat of Nature",
                artist: "Olexy",
                src: 'https://cdn.pixabay.com/audio/2022/11/11/audio_790a67f058.mp3',
                cover: 'assets/img/labplay/the-beat-of-nature.jpg'
            }
        ];

        let currentSongIndex = 0;
        let isPlaying = false;

        function loadSong(song) {
            songTitle.textContent = song.title;
            songArtist.textContent = song.artist;
            audio.src = song.src;
            albumArt.src = song.cover;
            albumArt.alt = `Carátula de ${song.title} - ${song.artist}`;
        }

        function playSong() {
            isPlaying = true;
            playerWrapper.classList.add('playing');
            playPauseBtn.innerHTML = '<i class="bi bi-pause-circle-fill"></i>';
            playPauseBtn.title = 'Pausar';
            audio.play();
        }

        function pauseSong() {
            isPlaying = false;
            playerWrapper.classList.remove('playing');
            playPauseBtn.innerHTML = '<i class="bi bi-play-circle-fill"></i>';
            playPauseBtn.title = 'Reproducir';
            audio.pause();
        }
        
        function prevSong() {
            currentSongIndex = (currentSongIndex - 1 + playlist.length) % playlist.length;
            loadSong(playlist[currentSongIndex]);
            playSong();
        }
        
        function nextSong() {
            currentSongIndex = (currentSongIndex + 1) % playlist.length;
            loadSong(playlist[currentSongIndex]);
            playSong();
        }

        function updateProgress(e) {
            const { duration, currentTime } = e.srcElement;
            if (duration) {
                const progressPercent = (currentTime / duration) * 100;
                progressBar.style.width = `${progressPercent}%`;
                totalDurationEl.textContent = formatTime(duration);
            }
            currentTimeEl.textContent = formatTime(currentTime);
        }
        
        function setProgress(e) {
            const width = this.clientWidth;
            const clickX = e.offsetX;
            const duration = audio.duration;
            if (duration) {
                audio.currentTime = (clickX / width) * duration;
            }
        }
        
        function formatTime(seconds) {
            if (isNaN(seconds)) return '0:00';
            const minutes = Math.floor(seconds / 60);
            let secs = Math.floor(seconds % 60);
            if (secs < 10) {
                secs = `0${secs}`;
            }
            return `${minutes}:${secs}`;
        }

        playPauseBtn.addEventListener('click', () => (isPlaying ? pauseSong() : playSong()));
        prevBtn.addEventListener('click', prevSong);
        nextBtn.addEventListener('click', nextSong);
        audio.addEventListener('timeupdate', updateProgress);
        progressContainer.addEventListener('click', setProgress);
        audio.addEventListener('ended', nextSong);
        
        loadSong(playlist[currentSongIndex]);
    });
    </script>
</body>
</html>
