<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>El Cerebro de Alta Tecnología - Visualización 3D</title>
    <style>
        :root {
            --primary: #00f3ff;
            --secondary: #ff0055;
            --bg: #050510;
            --glass: rgba(20, 20, 35, 0.7);
        }

        body { 
            margin: 0; 
            overflow: hidden; 
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: white;
        }

        #canvas-container {
            width: 100vw;
            height: 100vh;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }

        #ui-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            pointer-events: none; /* Permite clickear el modelo 3D a través de los espacios vacíos */
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        header {
            padding: 20px;
            background: linear-gradient(to bottom, black, transparent);
            pointer-events: auto;
        }

        h1 {
            margin: 0;
            font-weight: 300;
            letter-spacing: 2px;
            text-transform: uppercase;
            font-size: 1.5rem;
            color: var(--primary);
            text-shadow: 0 0 10px var(--primary);
        }

        .subtitle {
            font-size: 0.9rem;
            color: #aaa;
            max-width: 600px;
        }

        /* Sidebar de navegación */
        .info-panel {
            position: absolute;
            right: 20px;
            top: 20%;
            width: 300px;
            background: var(--glass);
            backdrop-filter: blur(10px);
            border-left: 2px solid var(--primary);
            padding: 20px;
            border-radius: 0 15px 15px 0;
            pointer-events: auto;
            transition: transform 0.3s ease;
            max-height: 70vh;
            overflow-y: auto;
        }

        .info-card {
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 15px;
        }

        .info-card h3 {
            color: var(--primary);
            margin-top: 0;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .info-card h3:hover {
            text-shadow: 0 0 8px var(--primary);
        }

        .info-card p {
            font-size: 0.9rem;
            line-height: 1.5;
            color: #ddd;
            display: none; /* Oculto por defecto */
            animation: fadeIn 0.5s;
        }

        .info-card.active p {
            display: block;
        }

        .stat-highlight {
            font-weight: bold;
            color: var(--secondary);
        }

        footer {
            padding: 15px;
            text-align: center;
            font-size: 0.8rem;
            color: #666;
            pointer-events: auto;
            background: linear-gradient(to top, black, transparent);
        }

        /* Botones de navegación */
        .nav-dots {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 15px;
            pointer-events: auto;
        }

        .dot {
            width: 12px;
            height: 12px;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
        }

        .dot:hover, .dot.active {
            background: var(--primary);
            box-shadow: 0 0 10px var(--primary);
            transform: scale(1.3);
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Scrollbar para el panel */
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 5px; }

    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://unpkg.com/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
</head>
<body>

    <div id="canvas-container"></div>

    <div id="ui-layer">
        <header>
            <h1>Neuro-Tech Explorer</h1>
            <p class="subtitle">Basado en el análisis de 86+ Billones de Neuronas</p>
        </header>

        <div class="nav-dots">
            <div class="dot active" onclick="focusSection(0)" title="Visión General"></div>
            <div class="dot" onclick="focusSection(1)" title="Sistema Visual"></div>
            <div class="dot" onclick="focusSection(2)" title="Control Motor"></div>
            <div class="dot" onclick="focusSection(3)" title="Sentidos y Entradas"></div>
        </div>

        <div class="info-panel" id="infoPanel">
            <div class="info-card active" id="card-0">
                <h3 onclick="toggleCard(0)">La Neurona <span>▼</span></h3>
                <p>El cerebro humano es un circuito de 6 capas. Contiene más de <span class="stat-highlight">86 mil millones de neuronas</span> y más de 65 billones de conexiones. Cada neurona tiene un promedio de 1,000 a 10,000 sinapsis.</p>
            </div>
            <div class="info-card" id="card-1">
                <h3 onclick="toggleCard(1)">Sistema Visual <span>▼</span></h3>
                <p>El proceso de reconocimiento visual ocupa de 4 a 6 mil millones de neuronas. Desde la retina (125 millones de bastones/conos) hasta el córtex visual (V1-V7), el cerebro detecta movimiento, caras y cuerpos automáticamente.</p>
            </div>
            <div class="info-card" id="card-2">
                <h3 onclick="toggleCard(2)">Cerebelo y Motor <span>▼</span></h3>
                <p>El "Cerebro pequeño". Aunque es compacto, el cerebelo contiene <span class="stat-highlight">69 mil millones de neuronas</span>. Es crucial para los hábitos aprendidos, habilidades, equilibrio y aceleración.</p>
            </div>
            <div class="info-card" id="card-3">
                <h3 onclick="toggleCard(3)">Los 8 Sentidos <span>▼</span></h3>
                <p>Más allá de los 5 básicos, tu cerebro procesa 8 entradas sensoriales principales: Vista, Olfato, Gusto, Tacto, Oído, <span class="stat-highlight">Propiocepción</span> (posición de extremidades), Expresiones Faciales y Sistema Vestibular (equilibrio).</p>
            </div>
        </div>

        <footer>
            Arrastra para rotar • Scroll para zoom • Creado para Github Pages
        </footer>
    </div>

    <script>
        // --- CONFIGURACIÓN DE THREE.JS ---
        const scene = new THREE.Scene();
        // Niebla para profundidad
        scene.fog = new THREE.FogExp2(0x050510, 0.002);

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 30;

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;
        controls.autoRotate = true;
        controls.autoRotateSpeed = 1.0;

        // --- GENERACIÓN PROCEDURAL DEL CEREBRO (NUBE DE PUNTOS) ---
        // Creamos una geometría personalizada basada en funciones matemáticas para simular dos hemisferios
        const brainGeometry = new THREE.BufferGeometry();
        const particleCount = 15000;
        const positions = [];
        const colors = [];

        const color1 = new THREE.Color(0x00f3ff); // Cyan
        const color2 = new THREE.Color(0xff0055); // Magenta

        for (let i = 0; i < particleCount; i++) {
            // Coordenadas esféricas modificadas
            const theta = Math.random() * Math.PI * 2;
            const phi = Math.acos((Math.random() * 2) - 1);
            const r = 10 + Math.random() * 0.5;

            // Convertir a cartesianas
            let x = r * Math.sin(phi) * Math.cos(theta);
            let y = r * Math.sin(phi) * Math.sin(theta);
            let z = r * Math.cos(phi);

            // Deformación para forma de cerebro (aplastar un poco y separar hemisferios)
            // Separación de hemisferios en el eje X
            x *= 0.8; // Más estrecho
            y *= 0.9; // Un poco aplastado arriba/abajo
            z *= 1.1; // Más largo (frontal a occipital)
            
            // Crear el surco interhemisférico
            if (x > 0) x += 0.5;
            else x -= 0.5;

            // Añadir ruido aleatorio para simular estructura orgánica interna
            x += (Math.random() - 0.5) * 0.5;
            y += (Math.random() - 0.5) * 0.5;
            z += (Math.random() - 0.5) * 0.5;

            positions.push(x, y, z);

            // Color basado en la posición (Gradiente frente-atrás)
            const mixedColor = color1.clone().lerp(color2, (z + 10) / 20);
            colors.push(mixedColor.r, mixedColor.g, mixedColor.b);
        }

        brainGeometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
        brainGeometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));

        // Material de partículas
        const material = new THREE.PointsMaterial({
            size: 0.15,
            vertexColors: true,
            blending: THREE.AdditiveBlending,
            transparent: true,
            opacity: 0.8
        });

        const brainSystem = new THREE.Points(brainGeometry, material);
        scene.add(brainSystem);

        // --- CONEXIONES NEURONALES (Líneas aleatorias) ---
        const lineMaterial = new THREE.LineBasicMaterial({
            color: 0xffffff,
            transparent: true,
            opacity: 0.05
        });

        // Creamos algunas líneas que conectan puntos aleatorios para simular sinapsis
        const lineGeometry = new THREE.BufferGeometry();
        const linePositions = [];
        
        // Tomamos una muestra de los puntos generados para conectar
        for(let i=0; i<1000; i++) {
            const index1 = Math.floor(Math.random() * particleCount) * 3;
            const index2 = Math.floor(Math.random() * particleCount) * 3;
            
            // Solo conectar si están relativamente cerca (para no cruzar todo el cerebro)
            const p1 = new THREE.Vector3(positions[index1], positions[index1+1], positions[index1+2]);
            const p2 = new THREE.Vector3(positions[index2], positions[index2+1], positions[index2+2]);
            
            if (p1.distanceTo(p2) < 3) {
                linePositions.push(p1.x, p1.y, p1.z);
                linePositions.push(p2.x, p2.y, p2.z);
            }
        }
        lineGeometry.setAttribute('position', new THREE.Float32BufferAttribute(linePositions, 3));
        const connections = new THREE.LineSegments(lineGeometry, lineMaterial);
        scene.add(connections);


        // --- LÓGICA DE INTERFAZ ---

        function toggleCard(index) {
            // Quitar clase active de todos
            document.querySelectorAll('.info-card').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.dot').forEach(d => d.classList.remove('active'));
            
            // Activar el seleccionado
            document.getElementById(`card-${index}`).classList.add('active');
            document.querySelectorAll('.dot')[index].classList.add('active');
        }

        function focusSection(index) {
            toggleCard(index);
            
            // Cambiar velocidad o color según la sección para dar feedback visual
            if(index === 0) { // Neurona
                controls.autoRotateSpeed = 2.0;
            } else if (index === 1) { // Visual
                // Rotar para ver la parte trasera (Occipital)
                controls.autoRotate = false;
                // Animación simple de cámara hacia atrás
            } else {
                controls.autoRotate = true;
                controls.autoRotateSpeed = 1.0;
            }
        }

        // --- ANIMACIÓN PRINCIPAL ---
        function animate() {
            requestAnimationFrame(animate);
            
            // Leve pulsación del cerebro
            const time = Date.now() * 0.001;
            brainSystem.scale.setScalar(1 + Math.sin(time * 2) * 0.02);
            connections.scale.setScalar(1 + Math.sin(time * 2) * 0.02);

            controls.update();
            renderer.render(scene, camera);
        }

        // Responsive
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        animate();
    </script>
</body>
</html>
