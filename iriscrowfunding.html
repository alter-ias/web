<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>IRIS | Filosofía Open Source</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;700&family=Montserrat:wght@300;400;700&display=swap"
        rel="stylesheet">
    <style>
        body {
            margin: 0;
            background: #050505;
            color: #fff;
            font-family: 'Montserrat', sans-serif;
            overflow-x: hidden;
        }

        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            z-index: -1;
            background: radial-gradient(circle at center, #1a1a1a 0%, #000000 100%);
        }

        section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 0 5%;
            box-sizing: border-box;
            position: relative;
            pointer-events: none;
        }

        .content-box {
            max-width: 500px;
            padding: 40px;
            background: rgba(0, 0, 0, 0.6);
            border-left: 2px solid #00E5FF;
            backdrop-filter: blur(10px);
            opacity: 0;
            transform: translateY(50px);
            transition: 0.8s ease-out;
            pointer-events: auto;
        }

        /* ALIGNMENT CLASSES */
        .align-left {
            margin-right: auto;
        }

        .align-right {
            margin-left: auto;
            border-left: none;
            border-right: 2px solid #00E5FF;
            text-align: right;
        }

        .align-center {
            margin: 0 auto;
            text-align: center;
            border: none;
            border-bottom: 2px solid #00E5FF;
        }

        .content-box.visible {
            opacity: 1;
            transform: translateY(0);
        }

        h1 {
            font-family: 'Rajdhani';
            font-size: 80px;
            margin: 0;
            line-height: 0.9;
            text-transform: uppercase;
            color: #fff;
            text-shadow: 0 0 20px rgba(0, 229, 255, 0.3);
        }

        h2 {
            font-family: 'Rajdhani';
            font-size: 40px;
            margin: 0 0 20px 0;
            color: #00E5FF;
            text-transform: uppercase;
        }

        p {
            font-size: 18px;
            line-height: 1.6;
            color: #ccc;
            margin-bottom: 0;
        }

        .accent {
            color: #00E5FF;
            font-weight: 700;
        }

        .scroll-indicator {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            animation: bounce 2s infinite;
            opacity: 0.5;
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translate(-50%, 0)
            }

            50% {
                transform: translate(-50%, 10px)
            }
        }

        .footer {
            height: 50vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #000;
            text-align: center;
        }

        .btn-cta {
            padding: 20px 60px;
            border: 1px solid #00E5FF;
            color: #00E5FF;
            background: transparent;
            font-family: 'Rajdhani';
            font-size: 24px;
            cursor: pointer;
            transition: 0.3s;
            text-decoration: none;
            display: inline-block;
            letter-spacing: 2px;
        }

        .btn-cta:hover {
            background: #00E5FF;
            color: #000;
            box-shadow: 0 0 30px rgba(0, 229, 255, 0.5);
        }
    </style>
</head>

<body>

    <div id="canvas-container"></div>

    <section id="sec-intro">
        <div class="content-box align-center visible">
            <h1 style="color:#00E5FF">IRIS</h1>
            <h1 style="font-size: 30px; letter-spacing: 10px; color: #888;">GENERATIVE SYS</h1>
            <br>
            <p>El primer controlador diseñado para la <span class="accent">síntesis visual</span>.</p>
            <p style="font-size: 14px; margin-top: 20px; color: #666;">SCROLL PARA DESCUBRIR</p>
        </div>
        <div class="scroll-indicator">▼</div>
    </section>

    <section id="sec-design">
        <div class="content-box align-left">
            <h2>Monolito Puro</h2>
            <p>Esculpido en un bloque macizo de <span class="accent">aluminio aeroespacial</span>. Sin tornillos
                visibles, sin etiquetas. Solo forma y función.</p>
            <p>La superficie "bead-blasted" elimina reflejos y distracciones, permitiendo una inmersión total en la
                performance.</p>
        </div>
    </section>

    <section id="sec-features">
        <div class="content-box align-right">
            <h2>Control Háptico</h2>
            <p>Faders de precisión con <span class="accent">halo de luz reactiva</span>. Perillas infinitas de aluminio
                sólido.</p>
            <p>Una matriz de cerámica retroiluminada separa tus herramientas: <b>Cálido</b> para la mezcla, <b>Frío</b>
                para los efectos.</p>
        </div>
    </section>

    <section id="sec-opensource">
        <div class="content-box align-left">
            <h2>Filosofía Abierta</h2>
            <p>En AlterLab, creemos que las herramientas deben ser <span class="accent">transparentes</span>.</p>
            <p>IRIS no es una caja negra. Es una plataforma abierta diseñada para ser hackeada, modificada y mejorada
                por la comunidad.</p>
        </div>
    </section>

    <section id="sec-explode">
        <div class="content-box align-center" style="max-width: 800px;">
            <h2>CREACIÓN COLECTIVA</h2>
            <p style="font-size: 24px;">"El arte generativo nace de compartir el código."</p>
            <br>
            <p>Descarga los planos. Imprime tus piezas. Reescribe el firmware.</p>
            <p>IRIS es tuyo.</p>
        </div>
    </section>

    <div class="footer">
        <div>
            <a href="#" class="btn-cta">ACCEDER AL REPOSITORIO</a>
            <p style="margin-top: 20px; font-size: 12px; color: #444;">ALTERLAB GENERATIVE SYSTEMS v11</p>
        </div>
    </div>

    <script type="module">
        import * as THREE from 'https://cdn.skypack.dev/three@0.136.0';
        import { RoundedBoxGeometry } from 'https://cdn.skypack.dev/three@0.136.0/examples/jsm/geometries/RoundedBoxGeometry.js';
        import { RectAreaLightUniformsLib } from 'https://cdn.skypack.dev/three@0.136.0/examples/jsm/lights/RectAreaLightUniformsLib.js';
        import { FontLoader } from 'https://cdn.skypack.dev/three@0.136.0/examples/jsm/loaders/FontLoader.js';
        import { TextGeometry } from 'https://cdn.skypack.dev/three@0.136.0/examples/jsm/geometries/TextGeometry.js';

        // --- SCROLL LOGIC ---
        const sections = document.querySelectorAll('section');

        let scrollY = 0;
        let pScroll = 0;

        function updateScroll() {
            scrollY = window.scrollY;
            const max = document.body.scrollHeight - window.innerHeight;
            pScroll = Math.max(0, Math.min(1, scrollY / max));

            sections.forEach(sec => {
                const rect = sec.getBoundingClientRect();
                if (rect.top < window.innerHeight * 0.75) {
                    const box = sec.querySelector('.content-box');
                    if (box) box.classList.add('visible');
                }
            });
        }
        window.addEventListener('scroll', updateScroll);
        window.addEventListener('resize', updateScroll);
        updateScroll();


        // --- 3D SETUP ---
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        renderer.toneMappingExposure = 1.0;
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        const scene = new THREE.Scene();

        const camera = new THREE.PerspectiveCamera(35, window.innerWidth / window.innerHeight, 0.1, 100);
        camera.position.set(0, 10, 10);
        camera.lookAt(0, 0, 0);

        // Lights
        RectAreaLightUniformsLib.init();
        const ambient = new THREE.AmbientLight(0xffffff, 0.4);
        scene.add(ambient);
        const spot1 = new THREE.SpotLight(0xffffff, 5);
        spot1.position.set(5, 10, 5); spot1.angle = Math.PI / 6; spot1.castShadow = true; scene.add(spot1);
        const rectLight = new THREE.RectAreaLight(0xffffff, 2, 10, 10);
        rectLight.position.set(-5, 5, 5); rectLight.lookAt(0, 0, 0); scene.add(rectLight);
        const spot2 = new THREE.SpotLight(0xddeeff, 3);
        spot2.position.set(0, 5, -8); spot2.lookAt(0, 0, 0); scene.add(spot2);

        // Materials
        const mats = {
            aluminum: new THREE.MeshStandardMaterial({ color: 0xffffff, roughness: 0.25, metalness: 0.95 }),
            ceramic: new THREE.MeshPhysicalMaterial({ color: 0xffffff, roughness: 0.1, transmission: 0.1, thickness: 0.5 }),
            glass: new THREE.MeshPhysicalMaterial({ color: 0xffffff, roughness: 0.0, transmission: 0.95, thickness: 1.0 }),
            plasticBlack: new THREE.MeshStandardMaterial({ color: 0x111111, roughness: 0.6 }),
            glowCyan: new THREE.MeshStandardMaterial({ color: 0x00ffff, emissive: 0x00E5FF, emissiveIntensity: 2.0, toneMapped: false }),
            glowWhite: new THREE.MeshStandardMaterial({ color: 0xaaccff, emissive: 0xaaccff, emissiveIntensity: 1.5, toneMapped: false }),
            glowRose: new THREE.MeshStandardMaterial({ color: 0xffaacc, emissive: 0xff88aa, emissiveIntensity: 1.5, toneMapped: false }),
            glowInd: new THREE.MeshStandardMaterial({ color: 0xffffff, emissive: 0xffffff, emissiveIntensity: 3.0, toneMapped: false }),
            text: new THREE.MeshStandardMaterial({ color: 0x999999, roughness: 0.4, metalness: 0.8 })
        };

        // --- MODEL CONSTRUCTION ---
        const group = new THREE.Group();
        scene.add(group);
        const parts = { chassis: [], fader: [], knobs: [], keysLeft: [], keysRight: [], center: [], corners: [] };
        function addPart(arr, mesh) { arr.push({ mesh: mesh, home: mesh.position.clone() }); }

        // Chassis
        const chassis = new THREE.Mesh(new RoundedBoxGeometry(6, 0.6, 4, 10, 0.15), mats.aluminum);
        chassis.castShadow = true; chassis.receiveShadow = true; group.add(chassis);
        addPart(parts.chassis, chassis);

        // Fader
        const fGrp = new THREE.Group();
        const slot = new THREE.Mesh(new RoundedBoxGeometry(2.5, 0.05, 0.15, 2, 0.02), mats.plasticBlack);
        slot.position.set(0, 0.301, 1.2); fGrp.add(slot);
        const hand = new THREE.Mesh(new RoundedBoxGeometry(0.3, 0.4, 0.12, 4, 0.02), mats.aluminum);
        hand.position.set(0, 0.45, 1.2); hand.castShadow = true; fGrp.add(hand);
        const halo = new THREE.Mesh(new THREE.PlaneGeometry(0.5, 0.3), mats.glowCyan);
        halo.rotation.x = -Math.PI / 2; halo.position.set(0, 0.302, 1.2); fGrp.add(halo);
        group.add(fGrp); addPart(parts.fader, fGrp);

        // Knobs
        const kGeo = new THREE.CylinderGeometry(0.25, 0.25, 0.2, 32);
        for (let i = 0; i < 6; i++) {
            const kGrp = new THREE.Group(); kGrp.position.set(-2.0 + (i * 0.8), 0.3, 0.6);
            const b = new THREE.Mesh(kGeo, mats.aluminum); b.position.y = 0.1; b.castShadow = true; kGrp.add(b);
            const ind = new THREE.Mesh(new THREE.CircleGeometry(0.02, 16), mats.glowInd);
            ind.rotation.x = -Math.PI / 2; ind.position.set(0, 0.201, -0.18); kGrp.add(ind);
            group.add(kGrp); addPart(parts.knobs, kGrp);
        }

        // Keys
        const keyGeo = new RoundedBoxGeometry(0.35, 0.1, 0.35, 4, 0.02);
        const lg = new THREE.Group(); const rg = new THREE.Group();
        group.add(lg); group.add(rg);
        addPart(parts.keysLeft, lg); addPart(parts.keysRight, rg);
        for (let r = 0; r < 4; r++) {
            for (let c = 0; c < 4; c++) {
                const k1 = new THREE.Mesh(keyGeo, mats.ceramic); k1.position.set(-2.2 + c * 0.4, 0.32, -1.2 + r * 0.4); k1.castShadow = true; lg.add(k1);
                const p1 = new THREE.Mesh(new THREE.PlaneGeometry(0.36, 0.36), mats.glowWhite); p1.rotation.x = -Math.PI / 2; p1.position.set(k1.position.x, 0.301, k1.position.z); lg.add(p1);
                const k2 = new THREE.Mesh(keyGeo, mats.ceramic); k2.position.set(1.0 + c * 0.4, 0.32, -1.2 + r * 0.4); k2.castShadow = true; rg.add(k2);
                const p2 = new THREE.Mesh(new THREE.PlaneGeometry(0.36, 0.36), mats.glowRose); p2.rotation.x = -Math.PI / 2; p2.position.set(k2.position.x, 0.301, k2.position.z); rg.add(p2);
            }
        }

        // Center & Corners
        const cGrp = new THREE.Group();
        const gBtn = new THREE.Mesh(new THREE.CylinderGeometry(0.6, 0.6, 0.05, 64), mats.glass);
        gBtn.position.set(0, 0.32, -0.6); cGrp.add(gBtn);
        group.add(cGrp); addPart(parts.center, cGrp);
        const cnGeo = new THREE.CylinderGeometry(0.18, 0.18, 0.1, 32);
        const cbL = new THREE.Mesh(cnGeo, mats.aluminum); cbL.position.set(-2.5, 0.32, 1.5); cbL.castShadow = true; group.add(cbL);
        addPart(parts.corners, cbL);
        const cbR = new THREE.Mesh(cnGeo, mats.aluminum); cbR.position.set(2.5, 0.32, 1.5); cbR.castShadow = true; group.add(cbR);
        addPart(parts.corners, cbR);

        // Text
        const loader = new FontLoader();
        loader.load('https://cdn.skypack.dev/three@0.136.0/examples/fonts/helvetiker_regular.typeface.json', function (font) {
            const t1 = new THREE.Mesh(new TextGeometry('IRIS', { font: font, size: 0.15, height: 0.01 }), mats.text);
            t1.rotation.x = -Math.PI / 2; t1.position.set(-2.8, 0.301, -1.6); group.add(t1);
            addPart(parts.chassis, t1);
            const t2 = new THREE.Mesh(new TextGeometry('ALTERLAB GENERATIVE SYSTEMS', { font: font, size: 0.06, height: 0.005 }), mats.text);
            t2.position.set(-1.5, 0.0, -2.01); t2.rotation.y = Math.PI; group.add(t2);
            addPart(parts.chassis, t2);
        });

        const floor = new THREE.Mesh(new THREE.PlaneGeometry(50, 50), new THREE.ShadowMaterial({ opacity: 0.1 }));
        floor.rotation.x = -Math.PI / 2; floor.position.y = -0.3; scene.add(floor);


        // --- ANIMATION LOOP ---
        function animate() {
            requestAnimationFrame(animate);

            let targetRotY = 0;
            let targetRotX = 0;
            let targetCamX = 0; // NEW: Camera Pan Target
            let explode = 0;

            // SCROLL PHASES
            if (pScroll < 0.25) {
                // INTRO: Text Center -> Model Center (or Low)
                targetRotX = 0.2;
                targetRotY = pScroll * 0.5;
                targetCamX = 0; // Center
            } else if (pScroll < 0.5) {
                // DESIGN: Text LEFT -> Model RIGHT
                const localP = (pScroll - 0.25) * 4;
                targetRotY = 0.125 + localP * 1.5;
                targetRotX = 0.2 - localP * 0.2;
                targetCamX = -3.5; // Move camera LEFT (equiv to model moving RIGHT)
            } else if (pScroll < 0.75) {
                // FEATURES: Text RIGHT -> Model LEFT
                const localP = (pScroll - 0.5) * 4;
                targetRotY = 1.625 - localP * 1.625;
                targetRotX = localP * 0.5;
                targetCamX = 3.5; // Move camera RIGHT (equiv to model moving LEFT)
            } else {
                // OPEN SOURCE: Text LEFT -> Model RIGHT (Exploded)
                const localP = (pScroll - 0.75) * 4;
                targetRotY = 0;
                targetRotX = 0.5 + localP * 0.2;
                targetCamX = -3.5;
                explode = localP;
            }

            // Smooth Damping
            group.rotation.y += (targetRotY - group.rotation.y) * 0.05;
            group.rotation.x += (targetRotX - group.rotation.x) * 0.05;
            camera.position.x += (targetCamX - camera.position.x) * 0.05; // Damped Camera Move
            camera.lookAt(0, 0, 0); // Always look at model center

            // Apply Explosion
            if (explode > 0.001) {
                parts.fader.forEach(p => { p.mesh.position.y = p.home.y + explode * 1.5; p.mesh.position.z = p.home.z + explode * 0.5; });
                parts.knobs.forEach((p, i) => { p.mesh.position.y = p.home.y + explode * 2.0 + (i * 0.05 * explode); });
                parts.keysLeft.forEach(p => {
                    p.mesh.position.y = p.home.y + explode * 2.5; p.mesh.position.x = p.home.x - explode; p.mesh.position.z = p.home.z - explode * 0.5;
                    p.mesh.rotation.z = explode * 0.1;
                });
                parts.keysRight.forEach(p => {
                    p.mesh.position.y = p.home.y + explode * 2.5; p.mesh.position.x = p.home.x + explode; p.mesh.position.z = p.home.z - explode * 0.5;
                    p.mesh.rotation.z = -explode * 0.1;
                });
                parts.center.forEach(p => { p.mesh.position.y = p.home.y + explode * 3.0; });
                parts.corners.forEach(p => {
                    const dirX = Math.sign(p.home.x);
                    p.mesh.position.y = p.home.y + explode * 1.0; p.mesh.position.x = p.home.x + dirX * explode * 1.5; p.mesh.position.z = p.home.z + explode * 1.5;
                });
            } else {
                [...parts.fader, ...parts.knobs, ...parts.keysLeft, ...parts.keysRight, ...parts.center, ...parts.corners].forEach(p => {
                    p.mesh.position.lerp(p.home, 0.1);
                    p.mesh.rotation.set(0, 0, 0);
                });
            }

            renderer.render(scene, camera);
        }
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight; camera.updateProjectionMatrix(); renderer.setSize(window.innerWidth, window.innerHeight);
        });
        animate();
    </script>
</body>

</html>
