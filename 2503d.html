<header class="hero">
    <canvas id="bg-3d"></canvas>
    <div class="hero-content">
        <h2>Conceptual Visual Presentation</h2>
    </div>
</header>

<main>
    <!-- The rest of your content remains exactly the same as before -->
    <!-- SECCIÓN 1: PRÓLOGO -->
    <section class="project-section" id="prologue">
        <div class="section-header">
            <h3>Prologue</h3>
            <hr>
        </div>
        
        <div class="main-video-asset asset">
             <div class="video-placeholder">▶</div>
            <div class="asset-caption">
                <h4>Ethereal Animation Test</h4>
                <p>Motion test inspired by Lavinia Meijer's "Bootreis", visualizing the coalescence of order from chaos.</p>
            </div>
        </div>

        <p class="section-description">The propensity for order to coalesce out of chaos, from the Big Bang to the evolution of life, keeping with the influence of the Ancient Greeks and the principle of Natural Law on the Declaration of Independence.</p>
        
        <div class="asset-gallery">
            <div class="asset">
                <img src="https://via.placeholder.com/400x250/0a192f/ffffff?text=Cosmic+Formation" alt="Concept Art: Cosmic Formation">
                <div class="asset-caption"><h4>Cosmic Imagery</h4><p>Visual exploration of galaxies and stars forming.</p></div>
            </div>
            <div class="asset">
                <img src="https://via.placeholder.com/400x250/b22234/ffffff?text=Vitruvian+Man" alt="Concept Art: Vitruvian Man Reference">
                <div class="asset-caption"><h4>Natural Law Motif</h4><p>Study on incorporating classical principles and humanism.</p></div>
            </div>
            <div class="asset">
                <img src="https://via.placeholder.com/400x250/FFFFFF/333333?text=Bird+Murmurations" alt="Concept Art: Bird Murmurations">
                <div class="asset-caption"><h4>Nature's Order</h4><p>Styleframe depicting the emergent patterns in nature.</p></div>
            </div>
        </div>
    </section>

    <!-- The other 4 sections go here exactly as before... -->
    <!-- SECCIÓN 2: BECOMING AMERICAN -->
    <section class="project-section" id="becoming-american">
        <div class="section-header">
            <h3>Becoming American</h3>
            <hr>
        </div>

        <div class="main-video-asset asset">
             <div class="video-placeholder">▶</div>
            <div class="asset-caption">
                <h4>Immigrant Arrival Motion Test</h4>
                <p>An animated sequence blending archival footage with generative art to show ships arriving at Ellis Island.</p>
            </div>
        </div>

        <p class="section-description">America as a magnet for intrepid dreamers from around the world and the foundations of America in early immigrant life.</p>
        
        <div class="asset-gallery">
            <div class="asset">
                <img src="https://via.placeholder.com/400x250/CCCCCC/333333?text=Ellis+Island+Portrait" alt="Concept Art: Ellis Island Portrait">
                <div class="asset-caption"><h4>Colorized Portraits</h4><p>AI-enhanced and artistically treated archival portraits.</p></div>
            </div>
             <div class="asset">
                <img src="https://via.placeholder.com/400x250/0a192f/ffffff?text=Statue+of+Liberty" alt="Concept Art: Statue of Liberty">
                <div class="asset-caption"><h4>Symbol of Hope</h4><p>Styleframe for the Statue of Liberty sequence.</p></div>
            </div>
             <div class="asset">
                <img src="https://via.placeholder.com/400x250/8B4513/FFFFFF?text=Railroad+Builders" alt="Concept Art: Railroad Builders">
                <div class="asset-caption"><h4>Building a Nation</h4><p>Generative art inspired by the labor of early immigrants.</p></div>
            </div>
        </div>
    </section>

    <!-- SECCIÓN 3: THE REVOLUTIONARY PROMISE -->
    <section class="project-section" id="revolutionary-promise">
        <div class="section-header">
            <h3>The Revolutionary Promise</h3>
            <hr>
        </div>

        <div class="main-video-asset asset">
             <div class="video-placeholder">▶</div>
            <div class="asset-caption">
                <h4>Isadora Duncan Inspired Dance</h4>
                <p>Motion capture test for new dance footage inspired by archival clips, representing freedom of expression.</p>
            </div>
        </div>
        
        <p class="section-description">Chronicles the advancement of civilization and human rights in America, featuring portraits of civil rights pioneers and landmark events.</p>

        <div class="asset-gallery">
            <div class="asset">
                <img src="https://via.placeholder.com/400x250/b22234/ffffff?text=Pioneers+of+Change" alt="Concept Art: Portraits of Pioneers">
                <div class="asset-caption"><h4>Portraits of Pioneers</h4><p>Pre-Raphaelite inspired styleframes of civil rights leaders.</p></div>
            </div>
            <div class="asset">
                <img src="https://via.placeholder.com/400x250/D2B48C/000000?text=Declaration+Signing" alt="Concept Art: Declaration Signing">
                <div class="asset-caption"><h4>Historical Recreation</h4><p>AI-assisted recreation of the signing of the Declaration.</p></div>
            </div>
            <div class="asset">
                <img src="https://via.placeholder.com/400x250/87CEEB/FFFFFF?text=TRUTH+JUSTICE+FREEDOM" alt="Concept Art: Key Words">
                <div class="asset-caption"><h4>Kinetic Typography</h4><p>Style test for animating the keywords TRUTH, JUSTICE, FREEDOM.</p></div>
            </div>
        </div>
    </section>

    <!-- SECCIÓN 4: THE PROMISE IN PERIL -->
    <section class="project-section" id="promise-in-peril">
        <div class="section-header">
            <h3>The Promise in Peril</h3>
            <hr>
        </div>
        
        <div class="main-video-asset asset">
             <div class="video-placeholder">▶</div>
            <div class="asset-caption">
                <h4>Dark Montage Animation Test</h4>
                <p>A fast-paced, high-contrast animated sequence featuring the rogue's gallery in a distorted style.</p>
            </div>
        </div>
        
        <p class="section-description">Chronicles the dark side of the American dream in black and white, with visual reference to Dante's Inferno and featuring a rogue's gallery of historical figures.</p>

        <div class="asset-gallery">
            <div class="asset">
                <img src="https://via.placeholder.com/400x250/000000/FFFFFF?text=Dante's+Inferno" alt="Concept Art: Dante's Inferno Style">
                <div class="asset-caption"><h4>Inferno Aesthetic</h4><p>High-contrast, B&W styleframe inspired by Dante's Inferno.</p></div>
            </div>
            <div class="asset">
                <img src="https://via.placeholder.com/400x250/333333/FFFFFF?text=Rogue's+Gallery" alt="Concept Art: Rogue's Gallery">
                <div class="asset-caption"><h4>Rogue's Gallery</h4><p>Concept for a caricature-style montage of antagonists.</p></div>
            </div>
            <div class="asset">
                <img src="https://via.placeholder.com/400x250/666666/FFFFFF?text=Metropolis" alt="Concept Art: Metropolis Reference">
                <div class="asset-caption"><h4>Jungle Law</h4><p>Architectural moodboard inspired by Fritz Lang's Metropolis.</p></div>
            </div>
        </div>
    </section>

    <!-- SECCIÓN 5: THE PROMISE PENDING -->
    <section class="project-section" id="promise-pending">
        <div class="section-header">
            <h3>The Promise Pending</h3>
            <hr>
        </div>

        <div class="main-video-asset asset">
             <div class="video-placeholder">▶</div>
            <div class="asset-caption">
                <h4>Symphony of Brotherhood</h4>
                <p>Motion concept showing diverse people and art styles coming together in a final, collaborative crescendo.</p>
            </div>
        </div>
        
        <p class="section-description">Chronicles the escalating culture war while celebrating American diversity as the source of dynamism and the secret of our success.</p>
        
        <div class="asset-gallery">
            <div class="asset">
                <img src="https://via.placeholder.com/400x250/0047AB/FFFFFF?text=Kehinde+Wiley+Style" alt="Concept Art: Kehinde Wiley Style">
                <div class="asset-caption"><h4>Hybrid Portraits</h4><p>Style inspired by Kehinde Wiley, combining contemporary subjects with historic settings.</p></div>
            </div>
            <div class="asset">
                <img src="https://via.placeholder.com/400x250/FFD700/000000?text=Unity" alt="Concept Art: Unity">
                <div class="asset-caption"><h4>Harmony & Happiness</h4><p>Vibrant, celebratory styleframes representing shared progress.</p></div>
            </div>
            <div class="asset">
                <img src="https://via.placeholder.com/400x250/32CD32/FFFFFF?text=American+Dynamism" alt="Concept Art: American Dynamism">
                <div class="asset-caption"><h4>Cultural Success</h4><p>An abstract representation of the fusion of cultures creating dynamism.</p></div>
            </div>
        </div>
    </section>
</main>

<footer class="footer">
    <p>DREAM250 Conceptual Presentation &copy; 2025 by Alter.Lab. For internal review only.</p>
</footer>

<!-- SCRIPT SECTION -->
<script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
<script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.150.1/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@0.150.1/examples/jsm/",
            "lil-gui": "https://cdn.jsdelivr.net/npm/lil-gui@0.19/+esm"
        }
    }
</script>
<script type="module">
    import * as THREE from 'three';
    import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
    import { GUI } from 'lil-gui';

    // --- PARAMETERS OBJECT ---
    const parameters = {
        modelScale: 6,
        modelPositionY: -1.0,
        mouseIntensity: 0.2,
        smoothingFactor: 0.05,
        initialCameraZ: 8,
        scrollZoomEnd: 5
    };

    // --- GUI SETUP ---
    const gui = new GUI();
    gui.add(parameters, 'modelScale', 1, 20).name('Tamaño (Escala)');
    gui.add(parameters, 'modelPositionY', -5, 5).name('Posición Vertical');
    gui.add(parameters, 'mouseIntensity', 0, 1).name('Intensidad Mouse');
    gui.add(parameters, 'initialCameraZ', 1, 20).name('Distancia Inicial');
    gui.add(parameters, 'scrollZoomEnd', 1, 20).name('Distancia Final (Scroll)');

    // --- SCENE SETUP ---
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({
        canvas: document.querySelector('#bg-3d'),
        alpha: true
    });
    renderer.setPixelRatio(window.devicePixelRatio);
    renderer.setSize(window.innerWidth, window.innerHeight);

    // --- LIGHTING ---
    const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
    scene.add(ambientLight);
    const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
    directionalLight.position.set(5, 10, 7.5);
    scene.add(directionalLight);

    // --- MODEL LOADING ---
    const loader = new GLTFLoader();
    let model;
    loader.load(
        'assets/3d/250base.glb',
        function (gltf) {
            model = gltf.scene;
            scene.add(model);
            // Initial update from parameters
            updateModelTransform();
        },
        undefined,
        function (error) {
            console.error('An error happened while loading the model:', error);
        }
    );

    // --- EVENT LISTENERS & HANDLERS ---
    let mouseX = 0;
    let mouseY = 0;
    window.addEventListener('mousemove', (event) => {
        mouseX = (event.clientX / window.innerWidth) * 2 - 1;
        mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
    });

    window.addEventListener('scroll', updateCameraOnScroll);
    window.addEventListener('resize', onWindowResize);

    // --- FUNCTIONS ---
    function updateModelTransform() {
        if (model) {
            model.scale.set(parameters.modelScale, parameters.modelScale, parameters.modelScale);
            model.position.y = parameters.modelPositionY;
        }
    }

    function updateCameraOnScroll() {
        const scrollableHeight = document.documentElement.scrollHeight - window.innerHeight;
        if (scrollableHeight <= 0) return;
        
        const scrollPercent = window.scrollY / scrollableHeight;
        const zoomDistance = parameters.initialCameraZ - parameters.scrollZoomEnd;
        camera.position.z = parameters.initialCameraZ - (scrollPercent * zoomDistance);
    }

    function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    }

    // --- RENDER LOOP ---
    function animate() {
        requestAnimationFrame(animate);
        
        if (model) {
            // Live update from GUI controls
            updateModelTransform();

            const targetRotationX = mouseY * parameters.mouseIntensity;
            const targetRotationY = mouseX * parameters.mouseIntensity;

            model.rotation.x += (targetRotationX - model.rotation.x) * parameters.smoothingFactor;
            model.rotation.y += (targetRotationY - model.rotation.y) * parameters.smoothingFactor;
        }

        renderer.render(scene, camera);
    }
    
    // --- INITIALIZE ---
    updateCameraOnScroll(); // Set initial camera position based on scroll (usually 0)
    animate();
</script>
